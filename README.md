# CopyRighteous - ЛЦТ-14 2024
### Сервис проверки видеофайлов на нарушение авторских прав

### Production Архитектура системы
![Architecture](images/architecture.png)
## Детали запуска
Для запуска будет достаточно установленного на машине Docker и Docker compose. Основные тесты проводились на графическом ускорителе Metal без Docker, для использования CUDA может потребоваться модификация docker-compose.yaml

Поскольку у нас есть одна натренированная модель, ее необходимо предварительно скачать с яндекс диска: https://disk.yandex.ru/d/F1VxcAoUrrNMVQ

Далее модель нужно поместить в папку ```models```, без переименования

#### Запуск проекта

```bash
cd src/copyRighteous
docker compose up --build
```
#### Для инициализации и запуска фронтэнда необходимо ввести следующие команды:
```bash
cd src/frontend
npm install
npm start
```

#### Для локальной разработки:
```bash
docker compose up qdrant mongo
chmod +x run_backend.sh
./run_backend.sh
```

## Полезные скрипты:
- ```upload_video_parallel.py``` параллельная загружка видео в индекс
- ```get_vectors.py``` получение результатов векторного поиска без применения алгоритма постпроцессинга для множества видео с сохранением в директорию
- ```get_submission.py``` получение результатов мэтчинга для множества видео с их загрузкой из директории

## Ссылки
Демонстрация работы системы: https://disk.yandex.ru/i/-418tMUMefRfUQ

Презентация: https://disk.yandex.ru/d/I3YB-veJaAJccw

Документация системы: https://disk.yandex.ru/i/dCyphbKuVAcOlQ

Страница документации эндпоинтов (требуется запуск бэкэна): http://localhost:8000/docs


---

## Основные части системы:
- Для векторизации изображений было решено использовать ResNet из-за его высокой производительности и способности извлекать глубокие признаки из изображений. В частности, мы использовали архитектуру ResNet-152, которая хорошо известна своим балансом между глубиной и вычислительной эффективностью. Сами изображения были преобразованы в формат grayscale перед индексированием, что обеспечения минимальной разницы между исходными и любыми измененным фрагментом.
- Для векторизации звука мы использовали Wav2Vec. Wav2Vec — это современная модель, предназначенная для обучения речевому представлению, которая особенно эффективна при улавливании нюансов аудиосигналов. Его архитектура позволяет ему изучать контекстуальные встраивания из необработанного аудио, что делает его идеальным для задач, требующих высококачественного извлечения аудио-функций. Используя Wav2Vec, мы добились векторизации наших аудиоданных таким образом, чтобы сохранить важные временные и спектральные характеристики, что упростило точный анализ и сравнение. В рамках системы есть возможность отключения модели, чтобы сэкэномить на ресурсах.
- Бэкэнд фреймворк - FastAPI
- Для упрощения развертывания, мы не использовали Ray и Kubernetes, однако использование данных технологий это вопрос времени, функциональность была протестирована